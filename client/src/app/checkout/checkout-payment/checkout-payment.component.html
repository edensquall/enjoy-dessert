<div [formGroup]="checkoutForm">
    <div class="px-1 px-sm-3 px-lg-5 py-5" formGroupName="paymentForm">
        <div class="row ml-5 mb-5">
            <h3 class="mb-5">付款</h3>
            <div class="col-12 mb-3">
                <app-text-input formControlName="nameOnCard" [label]="'持卡人姓名'"></app-text-input>
            </div>
            <div class="col-12 col-sm-6 mb-3">
                <span>信用卡號碼(e.g. 4242 4242 4242 4242)</span>
                <div #cardNumber class="form-control"></div>
                <ng-container *ngIf="cardErrors">
                    <span class="text-danger">{{cardErrors}}</span>
                </ng-container>
            </div>
            <div class="col-12 col-sm-3 mb-3">
                <span>到期日(e.g. 12/25)</span>
                <div #cardExpiry class="form-control"></div>
            </div>
            <div class="col-12 col-sm-3 mb-3">
                <span>安全驗證碼(e.g. 123)</span>
                <div #cardCvc class="form-control"></div>
            </div>
        </div>
        <div class="d-flex justify-content-between flex-row">
            <button class="btn btn-outline-secondary btn-lg me-3" (click)="scrollToTop()" cdkStepperPrevious><i class="fa fa-angle-left"></i>
                回檢視</button>
            <button [disabled]="loading 
                || checkoutForm.get('paymentForm')?.invalid 
                || !cardNumberValid 
                || !cardExpiryValid
                || !cardCvcValid" class="btn btn-primary btn-lg" (click)="submitOrder()">
                送出訂單 <i class="fa fa-angle-right"></i>
                <i *ngIf="loading" class="fa fa-spinner fa-spin"></i>
            </button>
        </div>
    </div>
</div>